name: "ë‹¤ì¤‘ ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ: ì´ë©”ì¼ ì´ˆì•ˆ í•˜ìœ„ ì—ì´ì „íŠ¸ê°€ ìˆëŠ” ì—°êµ¬ ì—ì´ì „íŠ¸"
description: |

## ëª©ì 
ê¸°ë³¸ ì—°êµ¬ ì—ì´ì „íŠ¸ê°€ Brave Search APIë¥¼ ì‚¬ìš©í•˜ê³  ì´ë©”ì¼ ì´ˆì•ˆ ì—ì´ì „íŠ¸(Gmail API ì‚¬ìš©)ë¥¼ ë„êµ¬ë¡œ ì‚¬ìš©í•˜ëŠ” Pydantic AI ë‹¤ì¤‘ ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•©ë‹ˆë‹¤. ì´ëŠ” ì™¸ë¶€ API í†µí•©ì„ í†µí•œ ì—ì´ì „íŠ¸-ë„êµ¬ íŒ¨í„´ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

## í•µì‹¬ ì›ì¹™
1. **ì»¨í…ìŠ¤íŠ¸ê°€ í•µì‹¬**: í•„ìš”í•œ ëª¨ë“  ë¬¸ì„œ, ì˜ˆì œ ë° ì£¼ì˜ ì‚¬í•­ì„ í¬í•¨í•©ë‹ˆë‹¤.
2. **ìœ íš¨ì„± ê²€ì‚¬ ë£¨í”„**: AIê°€ ì‹¤í–‰í•˜ê³  ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” ì‹¤í–‰ ê°€ëŠ¥í•œ í…ŒìŠ¤íŠ¸/ë¦°íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
3. **ì •ë³´ ë°€ë„**: ì½”ë“œë² ì´ìŠ¤ì˜ í‚¤ì›Œë“œ ë° íŒ¨í„´ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
4. **ì ì§„ì  ì„±ê³µ**: ê°„ë‹¨í•˜ê²Œ ì‹œì‘í•˜ê³ , ìœ íš¨ì„±ì„ ê²€ì‚¬í•œ ë‹¤ìŒ, ê°œì„ í•©ë‹ˆë‹¤.

---

## ëª©í‘œ
ì‚¬ìš©ìê°€ CLIë¥¼ í†µí•´ ì£¼ì œë¥¼ ì—°êµ¬í•  ìˆ˜ ìˆê³ , ì—°êµ¬ ì—ì´ì „íŠ¸ê°€ ì´ë©”ì¼ ì´ˆì•ˆ ì‘ì„± ì‘ì—…ì„ ì´ë©”ì¼ ì´ˆì•ˆ ì—ì´ì „íŠ¸ì— ìœ„ì„í•  ìˆ˜ ìˆëŠ” í”„ë¡œë•ì…˜ ì¤€ë¹„ ë‹¤ì¤‘ ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œì„ ë§Œë“­ë‹ˆë‹¤. ì‹œìŠ¤í…œì€ ì—¬ëŸ¬ LLM ê³µê¸‰ìë¥¼ ì§€ì›í•˜ê³  API ì¸ì¦ì„ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.

## ì´ìœ 
- **ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜**: ì—°êµ¬ ë° ì´ë©”ì¼ ì´ˆì•ˆ ì‘ì„± ì›Œí¬í”Œë¡œìš°ë¥¼ ìë™í™”í•©ë‹ˆë‹¤.
- **í†µí•©**: ê³ ê¸‰ Pydantic AI ë‹¤ì¤‘ ì—ì´ì „íŠ¸ íŒ¨í„´ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.
- **í•´ê²°ëœ ë¬¸ì œ**: ì—°êµ¬ ê¸°ë°˜ ì´ë©”ì¼ í†µì‹ ì„ ìœ„í•œ ìˆ˜ë™ ì‘ì—…ì„ ì¤„ì…ë‹ˆë‹¤.

## ë‚´ìš©
CLI ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜:
- ì‚¬ìš©ìê°€ ì—°êµ¬ ì¿¼ë¦¬ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
- ì—°êµ¬ ì—ì´ì „íŠ¸ê°€ Brave APIë¥¼ ì‚¬ìš©í•˜ì—¬ ê²€ìƒ‰í•©ë‹ˆë‹¤.
- ì—°êµ¬ ì—ì´ì „íŠ¸ê°€ ì´ë©”ì¼ ì´ˆì•ˆ ì—ì´ì „íŠ¸ë¥¼ í˜¸ì¶œí•˜ì—¬ Gmail ì´ˆì•ˆì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ê²°ê³¼ê°€ ì‚¬ìš©ìì—ê²Œ ì‹¤ì‹œê°„ìœ¼ë¡œ ìŠ¤íŠ¸ë¦¬ë°ë©ë‹ˆë‹¤.

### ì„±ê³µ ê¸°ì¤€
  - ì—°êµ¬ ì—ì´ì „íŠ¸ê°€ Brave APIë¥¼ í†µí•´ ì„±ê³µì ìœ¼ë¡œ ê²€ìƒ‰í•©ë‹ˆë‹¤.
  - ì´ë©”ì¼ ì—ì´ì „íŠ¸ê°€ ì ì ˆí•œ ì¸ì¦ìœ¼ë¡œ Gmail ì´ˆì•ˆì„ ìƒì„±í•©ë‹ˆë‹¤.
  - ì—°êµ¬ ì—ì´ì „íŠ¸ê°€ ì´ë©”ì¼ ì—ì´ì „íŠ¸ë¥¼ ë„êµ¬ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - CLIëŠ” ë„êµ¬ ê°€ì‹œì„±ê³¼ í•¨ê»˜ ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µì„ ì œê³µí•©ë‹ˆë‹¤.
  - ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•˜ê³  ì½”ë“œê°€ í’ˆì§ˆ í‘œì¤€ì„ ì¶©ì¡±í•©ë‹ˆë‹¤.


## í•„ìš”í•œ ëª¨ë“  ì»¨í…ìŠ¤íŠ¸

### ë¬¸ì„œ ë° ì°¸ì¡°
```yaml
# ë°˜ë“œì‹œ ì½ì–´ì•¼ í•¨ - ì»¨í…ìŠ¤íŠ¸ ì°½ì— í¬í•¨
- url: https://ai.pydantic.dev/agents/
  why: í•µì‹¬ ì—ì´ì „íŠ¸ ìƒì„± íŒ¨í„´

- url: https://ai.pydantic.dev/multi-agent-applications/
  why: ë‹¤ì¤‘ ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ íŒ¨í„´, íŠ¹íˆ ì—ì´ì „íŠ¸-ë„êµ¬

- url: https://developers.google.com/gmail/api/guides/sending
  why: Gmail API ì¸ì¦ ë° ì´ˆì•ˆ ìƒì„±

- url: https://api-dashboard.search.brave.com/app/documentation
  why: Brave Search API REST ì—”ë“œí¬ì¸íŠ¸

- file: examples/agent/agent.py
  why: ì—ì´ì „íŠ¸ ìƒì„±, ë„êµ¬ ë“±ë¡, ì¢…ì†ì„± íŒ¨í„´

- file: examples/agent/providers.py
  why: ë‹¤ì¤‘ ê³µê¸‰ì LLM êµ¬ì„± íŒ¨í„´

- file: examples/cli.py
  why: ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ ë° ë„êµ¬ ê°€ì‹œì„±ì„ ê°–ì¶˜ CLI êµ¬ì¡°

- url: https://github.com/googleworkspace/python-samples/blob/main/gmail/snippet/send%20mail/create_draft.py
  why: ê³µì‹ Gmail ì´ˆì•ˆ ìƒì„± ì˜ˆì œ
```

### í˜„ì¬ ì½”ë“œë² ì´ìŠ¤ íŠ¸ë¦¬
```bash
.
â”œâ”€â”€ examples/
â”‚   â”œâ”€â”€ agent/
â”‚   â”‚   â”œâ”€â”€ agent.py
â”‚   â”‚   â”œâ”€â”€ providers.py
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ cli.py
â”œâ”€â”€ PRPs/
â”‚   â””â”€â”€ templates/
â”‚       â””â”€â”€ prp_base.md
â”œâ”€â”€ INITIAL.md
â”œâ”€â”€ CLAUDE.md
â””â”€â”€ requirements.txt
```

### ì¶”ê°€ë  íŒŒì¼ì´ ìˆëŠ” ì›í•˜ëŠ” ì½”ë“œë² ì´ìŠ¤ íŠ¸ë¦¬
```bash
.
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ __init__.py               # íŒ¨í‚¤ì§€ ì´ˆê¸°í™”
â”‚   â”œâ”€â”€ research_agent.py         # Brave Searchê°€ ìˆëŠ” ê¸°ë³¸ ì—ì´ì „íŠ¸
â”‚   â”œâ”€â”€ email_agent.py           # Gmail ê¸°ëŠ¥ì´ ìˆëŠ” í•˜ìœ„ ì—ì´ì „íŠ¸
â”‚   â”œâ”€â”€ providers.py             # LLM ê³µê¸‰ì êµ¬ì„±
â”‚   â””â”€â”€ models.py                # ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ìœ„í•œ Pydantic ëª¨ë¸
â”œâ”€â”€ tools/
â”‚   â”œâ”€â”€ __init__.py              # íŒ¨í‚¤ì§€ ì´ˆê¸°í™”
â”‚   â”œâ”€â”€ brave_search.py          # Brave Search API í†µí•©
â”‚   â””â”€â”€ gmail_tool.py            # Gmail API í†µí•©
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ __init__.py              # íŒ¨í‚¤ì§€ ì´ˆê¸°í™”
â”‚   â””â”€â”€ settings.py              # í™˜ê²½ ë° êµ¬ì„± ê´€ë¦¬
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ __init__.py              # íŒ¨í‚¤ì§€ ì´ˆê¸°í™”
â”‚   â”œâ”€â”€ test_research_agent.py   # ì—°êµ¬ ì—ì´ì „íŠ¸ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_email_agent.py      # ì´ë©”ì¼ ì—ì´ì „íŠ¸ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_brave_search.py     # Brave ê²€ìƒ‰ ë„êµ¬ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_gmail_tool.py       # Gmail ë„êµ¬ í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ test_cli.py              # CLI í…ŒìŠ¤íŠ¸
â”œâ”€â”€ cli.py                       # CLI ì¸í„°í˜ì´ìŠ¤
â”œâ”€â”€ .env.example                 # í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿
â”œâ”€â”€ requirements.txt             # ì—…ë°ì´íŠ¸ëœ ì¢…ì†ì„±
â”œâ”€â”€ README.md                    # í¬ê´„ì ì¸ ë¬¸ì„œ
â””â”€â”€ credentials/.gitkeep         # Gmail ìê²© ì¦ëª… ë””ë ‰í† ë¦¬
```

### ì•Œë ¤ì§„ ë¬¸ì œì  ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ íŠ¹ì´ ì‚¬í•­
```python
# ì¤‘ìš”: Pydantic AIëŠ” ë¹„ë™ê¸° ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë™ê¸° í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì „ì²´ì ìœ¼ë¡œ ë¹„ë™ê¸°ë¥¼ ìš”êµ¬í•©ë‹ˆë‹¤.
# ì¤‘ìš”: Gmail APIëŠ” ì²« ì‹¤í–‰ ì‹œ OAuth2 íë¦„ì„ ìš”êµ¬í•©ë‹ˆë‹¤. credentials.jsonì´ í•„ìš”í•©ë‹ˆë‹¤.
# ì¤‘ìš”: Brave APIì—ëŠ” ì†ë„ ì œí•œì´ ìˆìŠµë‹ˆë‹¤. ë¬´ë£Œ ë“±ê¸‰ì—ì„œ ì›” 2000íšŒ ìš”ì²­.
# ì¤‘ìš”: ì—ì´ì „íŠ¸-ë„êµ¬ íŒ¨í„´ì€ í† í° ì¶”ì ì„ ìœ„í•´ ctx.usageë¥¼ ì „ë‹¬í•´ì•¼ í•©ë‹ˆë‹¤.
# ì¤‘ìš”: Gmail ì´ˆì•ˆì€ ì ì ˆí•œ MIME í˜•ì‹ìœ¼ë¡œ base64 ì¸ì½”ë”©ì´ í•„ìš”í•©ë‹ˆë‹¤.
# ì¤‘ìš”: í•­ìƒ ë” ê¹”ë”í•œ ì½”ë“œë¥¼ ìœ„í•´ ì ˆëŒ€ ì„í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤.
# ì¤‘ìš”: ë¯¼ê°í•œ ìê²© ì¦ëª…ì€ .envì— ì €ì¥í•˜ê³  ì»¤ë°‹í•˜ì§€ ë§ˆì‹­ì‹œì˜¤.
```

## êµ¬í˜„ ì²­ì‚¬ì§„

### ë°ì´í„° ëª¨ë¸ ë° êµ¬ì¡°

```python
# models.py - í•µì‹¬ ë°ì´í„° êµ¬ì¡°
from pydantic import BaseModel, Field
from typing import List, Optional
from datetime import datetime

class ResearchQuery(BaseModel):
    query: str = Field(..., description="ì¡°ì‚¬í•  ì—°êµ¬ ì£¼ì œ")
    max_results: int = Field(10, ge=1, le=50)
    include_summary: bool = Field(True)

class BraveSearchResult(BaseModel):
    title: str
    url: str
    description: str
    score: float = Field(0.0, ge=0.0, le=1.0)

class EmailDraft(BaseModel):
    to: List[str] = Field(..., min_items=1)
    subject: str = Field(..., min_length=1)
    body: str = Field(..., min_length=1)
    cc: Optional[List[str]] = None
    bcc: Optional[List[str]] = None

class ResearchEmailRequest(BaseModel):
    research_query: str
    email_context: str = Field(..., description="ì´ë©”ì¼ ìƒì„±ì„ ìœ„í•œ ì»¨í…ìŠ¤íŠ¸")
    recipient_email: str
```

### ì™„ë£Œí•  ì‘ì—… ëª©ë¡

```yaml
Task 1: êµ¬ì„± ë° í™˜ê²½ ì„¤ì •
CREATE config/settings.py:
  - PATTERN: os.getenvë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì œì²˜ëŸ¼ pydantic-settings ì‚¬ìš©
  - ê¸°ë³¸ê°’ìœ¼ë¡œ í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ
  - í•„ìš”í•œ API í‚¤ê°€ ìˆëŠ”ì§€ ìœ íš¨ì„± ê²€ì‚¬

CREATE .env.example:
  - í•„ìš”í•œ ëª¨ë“  í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ëª…ê³¼ í•¨ê»˜ í¬í•¨
  - examples/README.mdì˜ íŒ¨í„´ ë”°ë¥´ê¸°

Task 2: Brave Search ë„êµ¬ êµ¬í˜„
CREATE tools/brave_search.py:
  - PATTERN: examples/agent/tools.pyì™€ ê°™ì€ ë¹„ë™ê¸° í•¨ìˆ˜
  - httpxë¥¼ ì‚¬ìš©í•˜ëŠ” ê°„ë‹¨í•œ REST í´ë¼ì´ì–¸íŠ¸ (requirementsì— ì´ë¯¸ ìˆìŒ)
  - ì†ë„ ì œí•œ ë° ì˜¤ë¥˜ë¥¼ ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬
  - êµ¬ì¡°í™”ëœ BraveSearchResult ëª¨ë¸ ë°˜í™˜

Task 3: Gmail ë„êµ¬ êµ¬í˜„
CREATE tools/gmail_tool.py:
  - PATTERN: Gmail ë¹ ë¥¸ ì‹œì‘ì˜ OAuth2 íë¦„ ë”°ë¥´ê¸°
  - credentials/ ë””ë ‰í† ë¦¬ì— token.json ì €ì¥
  - ì ì ˆí•œ MIME ì¸ì½”ë”©ìœ¼ë¡œ ì´ˆì•ˆ ìƒì„±
  - ì¸ì¦ ìƒˆë¡œ ê³ ì¹¨ ìë™ ì²˜ë¦¬

Task 4: ì´ë©”ì¼ ì´ˆì•ˆ ì—ì´ì „íŠ¸ ìƒì„±
CREATE agents/email_agent.py:
  - PATTERN: examples/agent/agent.py êµ¬ì¡° ë”°ë¥´ê¸°
  - deps_type íŒ¨í„´ê³¼ í•¨ê»˜ Agent ì‚¬ìš©
  - gmail_toolì„ @agent.toolë¡œ ë“±ë¡
  - EmailDraft ëª¨ë¸ ë°˜í™˜

Task 5: ì—°êµ¬ ì—ì´ì „íŠ¸ ìƒì„±
CREATE agents/research_agent.py:
  - PATTERN: Pydantic AI ë¬¸ì„œì˜ ë‹¤ì¤‘ ì—ì´ì „íŠ¸ íŒ¨í„´
  - brave_searchë¥¼ ë„êµ¬ë¡œ ë“±ë¡
  - email_agent.run()ì„ ë„êµ¬ë¡œ ë“±ë¡
  - RunContextë¥¼ ì‚¬ìš©í•˜ì—¬ ì¢…ì†ì„± ì£¼ì…

Task 6: CLI ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
CREATE cli.py:
  - PATTERN: examples/cli.py ìŠ¤íŠ¸ë¦¬ë° íŒ¨í„´ ë”°ë¥´ê¸°
  - ë„êµ¬ ê°€ì‹œì„±ì„ ê°–ì¶˜ ìƒ‰ìƒ ì½”ë“œ ì¶œë ¥
  - asyncio.run()ìœ¼ë¡œ ë¹„ë™ê¸°ë¥¼ ì ì ˆí•˜ê²Œ ì²˜ë¦¬
  - ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì„¸ì…˜ ê´€ë¦¬

Task 7: í¬ê´„ì ì¸ í…ŒìŠ¤íŠ¸ ì¶”ê°€
CREATE tests/:
  - PATTERN: ì˜ˆì œ í…ŒìŠ¤íŠ¸ êµ¬ì¡° ë¯¸ëŸ¬ë§
  - ì™¸ë¶€ API í˜¸ì¶œ ëª¨ì˜
  - í•´í”¼ ê²½ë¡œ, ì—£ì§€ ì¼€ì´ìŠ¤, ì˜¤ë¥˜ í…ŒìŠ¤íŠ¸
  - 80% ì´ìƒ ì»¤ë²„ë¦¬ì§€ ë³´ì¥

Task 8: ë¬¸ì„œ ìƒì„±
CREATE README.md:
  - PATTERN: examples/README.md êµ¬ì¡° ë”°ë¥´ê¸°
  - ì„¤ì •, ì„¤ì¹˜, ì‚¬ìš©ë²• í¬í•¨
  - API í‚¤ êµ¬ì„± ë‹¨ê³„
  - ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨
```

### ì‘ì—…ë³„ ì˜ì‚¬ ì½”ë“œ

```python
# Task 2: Brave Search ë„êµ¬
async def search_brave(query: str, api_key: str, count: int = 10) -> List[BraveSearchResult]:
    # PATTERN: examplesê°€ aiohttpë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì²˜ëŸ¼ httpx ì‚¬ìš©
    async with httpx.AsyncClient() as client:
        headers = {"X-Subscription-Token": api_key}
        params = {"q": query, "count": count}
        
        # GOTCHA: API í‚¤ê°€ ìœ íš¨í•˜ì§€ ì•Šìœ¼ë©´ Brave APIëŠ” 401ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
        response = await client.get(
            "https://api.search.brave.com/res/v1/web/search",
            headers=headers,
            params=params,
            timeout=30.0  # ì¤‘ìš”: ì¤‘ë‹¨ì„ í”¼í•˜ê¸° ìœ„í•´ ì‹œê°„ ì´ˆê³¼ ì„¤ì •
        )
        
        # PATTERN: êµ¬ì¡°í™”ëœ ì˜¤ë¥˜ ì²˜ë¦¬
        if response.status_code != 200:
            raise BraveAPIError(f"APIê°€ {response.status_code}ë¥¼ ë°˜í™˜í–ˆìŠµë‹ˆë‹¤.")
        
        # Pydanticìœ¼ë¡œ êµ¬ë¬¸ ë¶„ì„ ë° ìœ íš¨ì„± ê²€ì‚¬
        data = response.json()
        return [BraveSearchResult(**result) for result in data.get("web", {}).get("results", [])]

# Task 5: ì´ë©”ì¼ ì—ì´ì „íŠ¸ë¥¼ ë„êµ¬ë¡œ ì‚¬ìš©í•˜ëŠ” ì—°êµ¬ ì—ì´ì „íŠ¸
@research_agent.tool
async def create_email_draft(
    ctx: RunContext[AgentDependencies],
    recipient: str,
    subject: str,
    context: str
) -> str:
    """ì—°êµ¬ ì»¨í…ìŠ¤íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì´ë©”ì¼ ì´ˆì•ˆì„ ìƒì„±í•©ë‹ˆë‹¤."""
    # ì¤‘ìš”: í† í° ì¶”ì ì„ ìœ„í•´ ì‚¬ìš©ëŸ‰ì„ ì „ë‹¬í•©ë‹ˆë‹¤.
    result = await email_agent.run(
        f"Create an email to {recipient} about: {context}",
        deps=EmailAgentDeps(subject=subject),
        usage=ctx.usage  # ë‹¤ì¤‘ ì—ì´ì „íŠ¸ ë¬¸ì„œì˜ PATTERN
    )
    
    return f"ì´ˆì•ˆì´ ID: {result.data}ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤."
```

### í†µí•© ì§€ì 
```yaml
ENVIRONMENT:
  - add to: .env
  - vars: |
      # LLM êµ¬ì„±
      LLM_PROVIDER=openai
      LLM_API_KEY=sk-...
      LLM_MODEL=gpt-4
      
      # Brave Search
      BRAVE_API_KEY=BSA...
      
      # Gmail (credentials.json ê²½ë¡œ)
      GMAIL_CREDENTIALS_PATH=./credentials/credentials.json
      
CONFIG:
  - Gmail OAuth: ì²« ì‹¤í–‰ ì‹œ ë¸Œë¼ìš°ì €ì—ì„œ ì¸ì¦ ìš”ì²­
  - í† í° ì €ì¥: ./credentials/token.json (ìë™ ìƒì„±)
  
DEPENDENCIES:
  - requirements.txt ì—…ë°ì´íŠ¸:
    - google-api-python-client
    - google-auth-httplib2
    - google-auth-oauthlib
```

## ìœ íš¨ì„± ê²€ì‚¬ ë£¨í”„

### ë ˆë²¨ 1: êµ¬ë¬¸ ë° ìŠ¤íƒ€ì¼
```bash
# ë¨¼ì € ì‹¤í–‰ - ì§„í–‰í•˜ê¸° ì „ì— ëª¨ë“  ì˜¤ë¥˜ ìˆ˜ì •
ruff check . --fix              # ìŠ¤íƒ€ì¼ ë¬¸ì œ ìë™ ìˆ˜ì •
mypy .                          # íƒ€ì… ê²€ì‚¬

# ì˜ˆìƒ: ì˜¤ë¥˜ ì—†ìŒ. ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ ì½ê³  ìˆ˜ì •í•˜ì‹­ì‹œì˜¤.
```

### ë ˆë²¨ 2: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
```python
# test_research_agent.py
async def test_research_with_brave():
    """ì—°êµ¬ ì—ì´ì „íŠ¸ê°€ ì˜¬ë°”ë¥´ê²Œ ê²€ìƒ‰í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸"""
    agent = create_research_agent()
    result = await agent.run("AI ì•ˆì „ ì—°êµ¬")
    assert result.data
    assert len(result.data) > 0

async def test_research_creates_email():
    """ì—°êµ¬ ì—ì´ì „íŠ¸ê°€ ì´ë©”ì¼ ì—ì´ì „íŠ¸ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ”ì§€ í…ŒìŠ¤íŠ¸"""
    agent = create_research_agent()
    result = await agent.run(
        "AI ì•ˆì „ì„ ì—°êµ¬í•˜ê³  john@example.comìœ¼ë¡œ ì´ë©”ì¼ ì´ˆì•ˆ ì‘ì„±"
    )
    assert "draft_id" in result.data

# test_email_agent.py  
def test_gmail_authentication(monkeypatch):
    """Gmail OAuth íë¦„ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸"""
    monkeypatch.setenv("GMAIL_CREDENTIALS_PATH", "test_creds.json")
    tool = GmailTool()
    assert tool.service is not None

async def test_create_draft():
    """ì ì ˆí•œ ì¸ì½”ë”©ìœ¼ë¡œ ì´ˆì•ˆ ìƒì„± í…ŒìŠ¤íŠ¸"""
    agent = create_email_agent()
    result = await agent.run(
        "AI ì—°êµ¬ì— ëŒ€í•´ test@example.comìœ¼ë¡œ ì´ë©”ì¼ ìƒì„±"
    )
    assert result.data.get("draft_id")
```

```bash
# í†µê³¼í•  ë•Œê¹Œì§€ ë°˜ë³µì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰:
pytest tests/ -v --cov=agents --cov=tools --cov-report=term-missing

# ì‹¤íŒ¨ ì‹œ: íŠ¹ì • í…ŒìŠ¤íŠ¸ ë””ë²„ê·¸, ì½”ë“œ ìˆ˜ì •, ë‹¤ì‹œ ì‹¤í–‰
```

### ë ˆë²¨ 3: í†µí•© í…ŒìŠ¤íŠ¸
```bash
# CLI ìƒí˜¸ ì‘ìš© í…ŒìŠ¤íŠ¸
python cli.py

# ì˜ˆìƒ ìƒí˜¸ ì‘ìš©:
# ë‹¹ì‹ : ìµœì‹  AI ì•ˆì „ ê°œë°œ ì—°êµ¬
# ğŸ¤– ì–´ì‹œìŠ¤í„´íŠ¸: [ì—°êµ¬ ê²°ê³¼ ìŠ¤íŠ¸ë¦¬ë°]
# ğŸ›  ì‚¬ìš©ëœ ë„êµ¬:
#   1. brave_search (query='AI ì•ˆì „ ê°œë°œ', limit=10)
#
# ë‹¹ì‹ : john@example.comìœ¼ë¡œ ì´ë©”ì¼ ì´ˆì•ˆ ì‘ì„±  
# ğŸ¤– ì–´ì‹œìŠ¤í„´íŠ¸: [ì´ˆì•ˆ ìƒì„±]
# ğŸ›  ì‚¬ìš©ëœ ë„êµ¬:
#   1. create_email_draft (recipient='john@example.com', ...)

# ìƒì„±ëœ ì´ˆì•ˆì— ëŒ€í•´ Gmail ì´ˆì•ˆ í´ë” í™•ì¸
```

## ìµœì¢… ìœ íš¨ì„± ê²€ì‚¬ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼: `pytest tests/ -v`
- [ ] ë¦°íŒ… ì˜¤ë¥˜ ì—†ìŒ: `ruff check .`
- [ ] íƒ€ì… ì˜¤ë¥˜ ì—†ìŒ: `mypy .`
- [ ] Gmail OAuth íë¦„ ì‘ë™ (ë¸Œë¼ìš°ì € ì—´ë¦¼, í† í° ì €ì¥ë¨)
- [ ] Brave Search ê²°ê³¼ ë°˜í™˜
- [ ] ì—°êµ¬ ì—ì´ì „íŠ¸ê°€ ì´ë©”ì¼ ì—ì´ì „íŠ¸ë¥¼ ì„±ê³µì ìœ¼ë¡œ í˜¸ì¶œ
- [ ] CLIê°€ ë„êµ¬ ê°€ì‹œì„±ê³¼ í•¨ê»˜ ì‘ë‹µ ìŠ¤íŠ¸ë¦¬ë°
- [ ] ì˜¤ë¥˜ ì‚¬ë¡€ê°€ ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬ë¨
- [ ] READMEì— ëª…í™•í•œ ì„¤ì • ì§€ì¹¨ í¬í•¨
- [ ] .env.exampleì— í•„ìš”í•œ ëª¨ë“  ë³€ìˆ˜ í¬í•¨

---

## í”¼í•´ì•¼ í•  ì•ˆí‹° íŒ¨í„´
- âŒ API í‚¤ë¥¼ í•˜ë“œì½”ë”©í•˜ì§€ ë§ˆì‹­ì‹œì˜¤. í™˜ê²½ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤.
- âŒ ë¹„ë™ê¸° ì—ì´ì „íŠ¸ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë™ê¸° í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ë§ˆì‹­ì‹œì˜¤.
- âŒ Gmailì— ëŒ€í•œ OAuth íë¦„ ì„¤ì •ì„ ê±´ë„ˆë›°ì§€ ë§ˆì‹­ì‹œì˜¤.
- âŒ APIì— ëŒ€í•œ ì†ë„ ì œí•œì„ ë¬´ì‹œí•˜ì§€ ë§ˆì‹­ì‹œì˜¤.
- âŒ ë‹¤ì¤‘ ì—ì´ì „íŠ¸ í˜¸ì¶œì—ì„œ ctx.usageë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì„ ìŠì§€ ë§ˆì‹­ì‹œì˜¤.
- âŒ credentials.json ë˜ëŠ” token.json íŒŒì¼ì„ ì»¤ë°‹í•˜ì§€ ë§ˆì‹­ì‹œì˜¤.

## ì‹ ë¢°ë„ ì ìˆ˜: 9/10

ë†’ì€ ì‹ ë¢°ë„ ì´ìœ :
- ì½”ë“œë² ì´ìŠ¤ì—ì„œ ë”°ë¥¼ ëª…í™•í•œ ì˜ˆì œ
- ì˜ ë¬¸ì„œí™”ëœ ì™¸ë¶€ API
- ë‹¤ì¤‘ ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œì— ëŒ€í•œ í™•ë¦½ëœ íŒ¨í„´
- í¬ê´„ì ì¸ ìœ íš¨ì„± ê²€ì‚¬ ê²Œì´íŠ¸

ğŸ“£ ì°¸ê³ : ì²« ì‹¤í–‰ ì‹œ Gmail OAuthëŠ” ë¸Œë¼ìš°ì € ì°½ì„ í†µí•´ ì‚¬ìš©ìì—ê²Œ ì¸ì¦ì„ ìš”ì²­í•©ë‹ˆë‹¤. `credentials.json`ì´ `./credentials/`ì— ì˜¬ë°”ë¥´ê²Œ ë°°ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì‹­ì‹œì˜¤.

# ì´ PRP ìƒì„± (í…œí”Œë¦¿ì¸ ê²½ìš°)
gemini context generate-prp INITIAL.md

# ì´ PRP ì‹¤í–‰
gemini context execute-prp PRPs/multi_agent_research_email_system.md